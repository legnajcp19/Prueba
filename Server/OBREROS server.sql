CREATE DATABASE OBREROS;
GO
USE OBREROS;
GO
set dateformat dmy;

CREATE TABLE ESTADOS(
ID_EDO NUMERIC(2)  PRIMARY KEY,
LUGAR_NAC VARCHAR (31)
);

CREATE TABLE CLASIFICACION (
ID_CLASIFICACION NUMERIC(2) PRIMARY KEY,
TIPO VARCHAR(1),
SUELDO NUMERIC(8,2)
);

CREATE TABLE OBRA (
ID_OBRA NUMERIC(3) NOT NULL,
NOMBRE VARCHAR(15),
ESTADO VARCHAR(15)
);

ALTER TABLE OBRA ADD CONSTRAINT PK_OBRA 
PRIMARY KEY (ID_OBRA);

CREATE TABLE MAQUINA (
ID_MAQUINA NUMERIC(3) NOT NULL,
NOMBRE VARCHAR(15),
TIPO VARCHAR(10)
);

ALTER TABLE MAQUINA ADD CONSTRAINT PK_MAQUINA
PRIMARY KEY (ID_MAQUINA);

CREATE TABLE OBRERO (
ID_OBRERO NUMERIC(3) NOT NULL,
NOMBRE VARCHAR(20),
APELLIDO VARCHAR(20),
ID_CLASIFICACION NUMERIC(2),
ID_MAQUINA NUMERIC(3),
ID_OBRA NUMERIC(3),
FECHA_INGRESO datetime,
ID_EDO NUMERIC(2)
);

ALTER TABLE OBRERO ADD CONSTRAINT PK_OBRERO
PRIMARY KEY (ID_OBRERO);

ALTER TABLE OBRERO ADD CONSTRAINT FK_OBRERO_OBRA 
FOREIGN KEY (ID_OBRA) REFERENCES OBRA(ID_OBRA);

ALTER TABLE OBRERO ADD CONSTRAINT FK_OBRERO_MAQUINA 
FOREIGN KEY (ID_MAQUINA) REFERENCES MAQUINA(ID_MAQUINA);


ALTER TABLE OBRERO ADD CONSTRAINT FK_OBRERO_ESTADO
FOREIGN KEY (ID_EDO) REFERENCES ESTADOS(ID_EDO);

ALTER TABLE OBRERO ADD CONSTRAINT FK_OBRERO_CLASIFICACION
FOREIGN KEY (ID_CLASIFICACION) REFERENCES CLASIFICACION (ID_CLASIFICACION);

CREATE TABLE NOMINA(
NO_RECIBO NUMERIC(6) PRIMARY KEY,
ID_OBRERO NUMERIC(3),
ID_CLASIFICACION NUMERIC(2),
N_SEM NUMERIC(3),
CANT_HORA NUMERIC(2),
TOTAL NUMERIC(8)
);

ALTER TABLE NOMINA ADD CONSTRAINT FK_NOM_CLAS 
FOREIGN KEY (ID_CLASIFICACION) REFERENCES CLASIFICACION(ID_CLASIFICACION);

ALTER TABLE NOMINA ADD CONSTRAINT FK_NOM_OBRE
FOREIGN KEY (ID_OBRERO) REFERENCES OBRERO(ID_OBRERO);


INSERT INTO ESTADOS VALUES (1,'CDMX');
INSERT INTO ESTADOS VALUES (2,'AGUASCALIENTES');
INSERT INTO ESTADOS VALUES (3,'BAJA CALIFORNIA');
INSERT INTO ESTADOS VALUES (4,'BAJA CALIFORNIA SUR');
INSERT INTO ESTADOS VALUES (5,'CAMPECHE');
INSERT INTO ESTADOS VALUES (6,'CHIAPAS');
INSERT INTO ESTADOS VALUES (7,'CHIHUAHUA');
INSERT INTO ESTADOS VALUES (8,'COAHUILA DE ZARAGOZA');
INSERT INTO ESTADOS VALUES (9,'COLIMA');
INSERT INTO ESTADOS VALUES (10,'DURANGO');
INSERT INTO ESTADOS VALUES (11,'GUANAJUATO');
INSERT INTO ESTADOS VALUES (12,'GUERRERO');
INSERT INTO ESTADOS VALUES (13,'ESTADO DE HIDALGO');
INSERT INTO ESTADOS VALUES (14,'JALISCO');
INSERT INTO ESTADOS VALUES (15,'ESTADO DE M XICO');
INSERT INTO ESTADOS VALUES (16,'MICHOAC N DE OCAMPO');
INSERT INTO ESTADOS VALUES (17,'MORELOS');
INSERT INTO ESTADOS VALUES (18,'NAYARIT');
INSERT INTO ESTADOS VALUES (19,'NUEVO LE N');
INSERT INTO ESTADOS VALUES (20,'OAXACA');
INSERT INTO ESTADOS VALUES (21,'PUEBLA');
INSERT INTO ESTADOS VALUES (22,'QUER TARO');
INSERT INTO ESTADOS VALUES (23,'QUINTANA ROO');
INSERT INTO ESTADOS VALUES (24,'SAN LUIS POTOS ');
INSERT INTO ESTADOS VALUES (25,'SINALOA');
INSERT INTO ESTADOS VALUES (26,'SONORA');
INSERT INTO ESTADOS VALUES (27,'TABASCO');
INSERT INTO ESTADOS VALUES (28,'TAMAULIPAS');
INSERT INTO ESTADOS VALUES (29,'TLAXCALA');
INSERT INTO ESTADOS VALUES (30,'VERACRUZ DE IGNACIO DE LA LLAVE');
INSERT INTO ESTADOS VALUES (31,'YUCAT N');
INSERT INTO ESTADOS VALUES (32,'ZACATECAS');

INSERT INTO CLASIFICACION VALUES (1,'A',5000.10);
INSERT INTO CLASIFICACION VALUES (2,'B',25000.80);
INSERT INTO CLASIFICACION VALUES (3,'C',75000.50);



INSERT INTO OBRA VALUES (1,'COYOACAN','CDMX');
INSERT INTO OBRA VALUES (2,'GUADALAJARA','JALISCO');
INSERT INTO OBRA VALUES (3,'MONTERREY','NUEVO LEON');
INSERT INTO OBRA VALUES (4,'PUEBLA','PUEBLA');
INSERT INTO OBRA VALUES (5,'XALAPA','VERACRUZ');
INSERT INTO OBRA VALUES (6,'PACHUCA','HIDALGO');
INSERT INTO OBRA VALUES (7,'TOLUCA','EDO MEX');


INSERT INTO MAQUINA VALUES (1,'ESCABADORA','PESADA');
INSERT INTO MAQUINA VALUES (2,'RETROESCABADORA','PESADA');
INSERT INTO MAQUINA VALUES (3,'DRAGAS','PESADA');
INSERT INTO MAQUINA VALUES (4,'MOTOVOLQUETE','SEMIPESADA');
INSERT INTO MAQUINA VALUES (5,'TRACTOR',NULL);
INSERT INTO MAQUINA VALUES (6,'CISTERNA',NULL);
INSERT INTO MAQUINA VALUES (7,'NEUMATICAS','LIGERO');
INSERT INTO MAQUINA VALUES (8,'ELECTRICAS','PESADA');
INSERT INTO MAQUINA VALUES (9,'MOTOTRAILAS',NULL);
INSERT INTO MAQUINA VALUES (10,'DUMPERS',NULL);


INSERT INTO OBRERO VALUES (1,'Lorenzo','Cordero',1,3,1,'21/10/2020',9);
INSERT INTO OBRERO VALUES (2,'Celestino','Aguilar',2,4,5,'1/2/2020',10);
INSERT INTO OBRERO VALUES (3,'Jesus','Granados',1,3,1,'25/5/2020',23);
INSERT INTO OBRERO VALUES (4,'Emmanuel','Ponce',1,8,NULL,'22/3/2020',28);
INSERT INTO OBRERO VALUES (5,'Cecilia','Perez',1,7,1,'4/4/2020',11);
INSERT INTO OBRERO VALUES (6,'David','Lopez',1,2,3,'26/5/2021',20);
INSERT INTO OBRERO VALUES (7,'Maria','Dolores',1,4,4,'23/6/2020',7);
INSERT INTO OBRERO VALUES (8,'Enrique','Martinez',1,4,NULL,'25/4/2021',28);
INSERT INTO OBRERO VALUES (9,'Pablo','Quintana',1,2,NULL,'3/4/2020',29);
INSERT INTO OBRERO VALUES (10,'Lucia','Gutierrez',1,5,1,'3/10/2020',27);
INSERT INTO OBRERO VALUES (11,'Monica','Pe a',1,NULL,1,'1/7/2021',22);
INSERT INTO OBRERO VALUES (12,'Victor','Suarez',1,6,4,'3/8/2020',29);
INSERT INTO OBRERO VALUES (13,'Sergio','Raigoza',1,6,1,'1/7/2020',13);
INSERT INTO OBRERO VALUES (14,'Juan','Lopez',1,4,1,'15/1/2020',1);
INSERT INTO OBRERO VALUES (15,'Pablo','Araiza',1,8,4,'4/2/2021',15);
INSERT INTO OBRERO VALUES (16,'Jorge','Gomez',1,5,2,'28/8/2020',24);
INSERT INTO OBRERO VALUES (17,'Hector','Solano',2,5,3,'1/1/2021',29);
INSERT INTO OBRERO VALUES (18,'Fernanda','Castro',1,6,5,'21/1/2020',3);
INSERT INTO OBRERO VALUES (19,'Antonio','Rioja',1,1,5,'25/11/2020',17);
INSERT INTO OBRERO VALUES (20,'Enrique','Blozano',1,4,3,'2/10/2020',3);
INSERT INTO OBRERO VALUES (21,'Juana','Alvez',1,NULL,1,'17/7/2020',7);
INSERT INTO OBRERO VALUES (22,'David','Rivero',1,7,4,'13/11/2020',17);
INSERT INTO OBRERO VALUES (23,'Esteban','Silva',2,NULL,4,'10/8/2020',9);
INSERT INTO OBRERO VALUES (24,'Jesus','Palma',1,6,4,'5/7/2021',8);
INSERT INTO OBRERO VALUES (25,'Mauricio','Gestido',1,2,2,'12/9/2020',15);
INSERT INTO OBRERO VALUES (26,'Quirino','Gonzalez',1,8,5,'29/1/2020',2);
INSERT INTO OBRERO VALUES (27,'Angeles','Cruz',1,6,1,'24/12/2020',13);
INSERT INTO OBRERO VALUES (28,'Mario','Hernandez',1,NULL,NULL,'25/2/2020',32);
INSERT INTO OBRERO VALUES (29,'Marco','Perea',1,NULL,NULL,'5/4/2021',20);
INSERT INTO OBRERO VALUES (30,'Alicia','Quintero',1,7,1,'25/3/2020',25);
INSERT INTO OBRERO VALUES (31,'JOse','Rosas',1,NULL,4,'2/3/2021',25);
INSERT INTO OBRERO VALUES (32,'Carlos','Vivanco',1,NULL,1,'23/8/2020',20);
INSERT INTO OBRERO VALUES (33,'Gerardo','Gonzalez',1,4,4,'7/6/2020',9);
INSERT INTO OBRERO VALUES (34,'Walter','Miranda',1,6,2,'20/6/2021',26);
INSERT INTO OBRERO VALUES (35,'Maria','Sosa',1,6,NULL,'29/7/2021',13);
INSERT INTO OBRERO VALUES (36,'Cristian','Monroy',2,2,5,'30/5/2021',18);
INSERT INTO OBRERO VALUES (37,'Ignacio','Mendez',1,NULL,NULL,'8/8/2020',14);
INSERT INTO OBRERO VALUES (38,'Jaime','Salazar',2,7,3,'9/9/2020',23);
INSERT INTO OBRERO VALUES (39,'Mariana','Estevez',1,NULL,NULL,'18/9/2020',31);
INSERT INTO OBRERO VALUES (40,'Gibran','Cruz',1,7,1,'5/6/2020',28);
INSERT INTO OBRERO VALUES (41,'Gabriel','Ledesma',1,3,4,'29/6/2021',27);
INSERT INTO OBRERO VALUES (42,'Cristian','Nasa',1,1,2,'18/2/2020',29);
INSERT INTO OBRERO VALUES (43,'Diana','Saravia',1,2,4,'4/11/2020',24);
INSERT INTO OBRERO VALUES (44,'Laura','Soria',1,NULL,NULL,'24/1/2020',20);
INSERT INTO OBRERO VALUES (45,'Leticia','Costa',3,3,3,'8/3/2021',3);
INSERT INTO OBRERO VALUES (46,'Hector','Lopez',1,NULL,1,'5/3/2021',10);
INSERT INTO OBRERO VALUES (47,'Jose','Pelayo',1,8,1,'4/3/2021',5);
INSERT INTO OBRERO VALUES (48,'Mario','Garcia',3,3,2,'27/9/2020',27);
INSERT INTO OBRERO VALUES (49,'Juvenal','Garcia',3,NULL,NULL,'19/2/2020',6);
INSERT INTO OBRERO VALUES (50,'Francisco','Serrano',1,5,NULL,'15/10/2020',28);

insert into nomina values(1,1,1,1,58,NULL);
insert into nomina values(2,2,2,1,54,NULL);
insert into nomina values(3,3,1,1,55,NULL);
insert into nomina values(4,4,1,1,51,NULL);
insert into nomina values(5,5,1,1,54,NULL);
insert into nomina values(6,6,1,1,59,NULL);
insert into nomina values(7,7,1,1,56,NULL);
insert into nomina values(8,8,1,1,49,NULL);
insert into nomina values(9,9,1,1,55,NULL);
insert into nomina values(10,10,1,1,58,NULL);
insert into nomina values(11,11,1,1,59,NULL);
insert into nomina values(12,12,1,1,50,NULL);
insert into nomina values(13,13,1,1,51,NULL);
insert into nomina values(14,14,1,1,56,NULL);
insert into nomina values(15,15,1,1,58,NULL);
insert into nomina values(16,16,1,1,56,NULL);
insert into nomina values(17,17,2,1,49,NULL);
insert into nomina values(18,18,1,1,48,NULL);
insert into nomina values(19,19,1,1,57,NULL);
insert into nomina values(20,20,1,1,51,NULL);
insert into nomina values(21,21,1,1,59,NULL);
insert into nomina values(22,22,1,1,58,NULL);
insert into nomina values(23,23,2,1,52,NULL);
insert into nomina values(24,24,1,1,49,NULL);
insert into nomina values(25,25,1,1,55,NULL);
insert into nomina values(26,26,1,1,56,NULL);
insert into nomina values(27,27,1,1,54,NULL);
insert into nomina values(28,28,1,1,55,NULL);
insert into nomina values(29,29,1,1,54,NULL);
insert into nomina values(30,30,1,1,55,NULL);
insert into nomina values(31,31,1,1,56,NULL);
insert into nomina values(32,32,1,1,56,NULL);
insert into nomina values(33,33,1,1,54,NULL);
insert into nomina values(34,34,1,1,52,NULL);
insert into nomina values(35,35,1,1,55,NULL);
insert into nomina values(36,36,2,1,54,NULL);
insert into nomina values(37,37,1,1,60,NULL);
insert into nomina values(38,38,2,1,56,NULL);
insert into nomina values(39,39,1,1,58,NULL);
insert into nomina values(40,40,1,1,49,NULL);
insert into nomina values(41,41,1,1,50,NULL);
insert into nomina values(42,42,1,1,53,NULL);
insert into nomina values(43,43,1,1,52,NULL);
insert into nomina values(44,44,1,1,58,NULL);
insert into nomina values(45,45,3,1,56,NULL);
insert into nomina values(46,46,1,1,57,NULL);
insert into nomina values(47,47,NULL,1,51,NULL);
insert into nomina values(48,48,NULL,1,53,NULL);
insert into nomina values(49,49,NULL,1,50,NULL);
insert into nomina values(50,50,NULL,1,58,NULL);
insert into nomina values(51,1,1,2,51,NULL);
insert into nomina values(52,2,2,2,60,NULL);
insert into nomina values(53,3,1,2,49,NULL);
insert into nomina values(54,4,1,2,50,NULL);
insert into nomina values(55,5,1,2,53,NULL);
insert into nomina values(56,6,1,2,60,NULL);
insert into nomina values(57,7,1,2,50,NULL);
insert into nomina values(58,8,1,2,54,NULL);
insert into nomina values(59,9,1,2,59,NULL);
insert into nomina values(60,10,1,2,55,NULL);
insert into nomina values(61,11,1,2,55,NULL);
insert into nomina values(62,12,1,2,54,NULL);
insert into nomina values(63,13,1,2,54,NULL);
insert into nomina values(64,14,1,2,48,NULL);
insert into nomina values(65,15,1,2,60,NULL);
insert into nomina values(66,16,1,2,59,NULL);
insert into nomina values(67,17,2,2,51,NULL);
insert into nomina values(68,18,1,2,56,NULL);
insert into nomina values(69,19,1,2,48,NULL);
insert into nomina values(70,20,1,2,48,NULL);
insert into nomina values(71,21,1,2,53,NULL);
insert into nomina values(72,22,1,2,55,NULL);
insert into nomina values(73,23,2,2,60,NULL);
insert into nomina values(74,24,1,2,50,NULL);
insert into nomina values(75,25,1,2,59,NULL);
insert into nomina values(76,26,1,2,48,NULL);
insert into nomina values(77,27,1,2,52,NULL);
insert into nomina values(78,28,1,2,55,NULL);
insert into nomina values(79,29,1,2,60,NULL);
insert into nomina values(80,30,1,2,51,NULL);




SELECT COUNT(*) FROM NOMINA;
SELECT COUNT(*) FROM OBRA;
SELECT COUNT(*) FROM MAQUINA;
SELECT COUNT(*) FROM OBRERO;
SELECT COUNT(*) FROM CLASIFICACION;
SELECT COUNT(*) FROM ESTADOS;

